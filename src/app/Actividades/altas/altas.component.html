<body class="bg-white">
  <div class="container">
    <div class="container-table shadow">
      <div class="py-5 text-center">
        <h2>ALTAS PACIENTES</h2>
      </div>
      <div class="row">
        <div class="col-md-12 order-md-1">
          <form class="needs-validation" [formGroup]="registroForm" (ngSubmit)="onSubmit()">
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName">Nombre(s)</label>
                <input type="text" class="form-control" formControlName="nombre" [ngClass]="{ 'is-invalid': submitted && f.nombre.errors }">
                <div *ngIf="submitted && f.nombre.errors" class="invalid-feedback">
                  <div *ngIf="f.nombre.errors.required">El nombre es requerido</div>
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="lastName">Apellidos</label>
                <input type="text" class="form-control" formControlName="apellido" [ngClass]="{ 'is-invalid': submitted && f.apellido.errors }">
                <div *ngIf="submitted && f.apellido.errors" class="invalid-feedback">
                  <div *ngIf="f.apellido.errors.required">El apellido es requerido</div>
                </div>
              </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="username">Codigo Postal</label>
                  <div class="input-group">
                    <input type="text" class="form-control" formControlName="codigoPostal" [ngClass]="{ 'is-invalid': submitted && f.codigoPostal.errors }">
                    <div *ngIf="submitted && f.codigoPostal.errors" class="invalid-feedback">
                      <div *ngIf="f.codigoPostal.errors.required">El codigo postal es requerido</div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="email">Correo</label>
                    <input type="email" class="form-control" formControlName="correo" placeholder="nombre@dominio.com" [ngClass]="{ 'is-invalid': submitted && f.correo.errors }">
                    <div *ngIf="submitted && f.correo.errors" class="invalid-feedback">
                      <div *ngIf="f.correo.errors.required">El correo es requerido</div>
                      <div *ngIf="f.correo.errors.email">Debe ingresar un correo valido</div>
                    </div>
                </div>
              </div>
            <div class="mb-3">
              <label for="address">Dirección</label>
              <input type="text" class="form-control" formControlName="direccion" placeholder="1234 Main St" [ngClass]="{ 'is-invalid': submitted && f.direccion.errors }">
              <div *ngIf="submitted && f.direccion.errors" class="invalid-feedback">
                <div *ngIf="f.direccion.errors.required">La direccion es requerida</div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-5 mb-3">
                <label for="country">País</label>
                <select class="custom-select d-block w-100" formControlName="idPais" [ngClass]="{ 'is-invalid': submitted && f.idPais.errors }" (change)="obtenerEstados();">
                  <option value="" selected disabled hidden>Seleccione un País</option>
                  <option *ngFor="let pais of paises" [value]="pais.idu_pais">{{pais.nom_pais}}</option>
                </select>
                <div *ngIf="submitted && f.idPais.errors" class="invalid-feedback">
                  <div *ngIf="f.idPais.errors.required">El país es requerido</div>
                </div>
              </div>
              <div class="col-md-4 mb-3">
                <label for="state">Estado</label>
                <select class="custom-select d-block w-100" formControlName="idEstado" [ngClass]="{ 'is-invalid': submitted && f.idEstado.errors }" (change)="obtenerCiudades();">
                  <option value="" selected hidden disabled>Seleccione un Estado</option>
                  <option *ngFor="let estado of estados" [value]="estado.idu_estado">{{estado.nom_estado}}</option>
                </select>
                <div *ngIf="submitted && f.idEstado.errors" class="invalid-feedback">
                  <div *ngIf="f.idEstado.errors.required">El estado es requerido</div>
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <label for="zip">Ciudad</label>
                <select class="custom-select d-block w-100" formControlName="idCiudad" [ngClass]="{ 'is-invalid': submitted && f.idCiudad.errors }">
                  <option value="" selected disabled hidden>Seleccione una Ciudad</option>
                  <option *ngFor="let ciudad of ciudades" [value]="ciudad.idu_ciudad">{{ciudad.nom_ciudad}}</option>
                </select>
                <div *ngIf="submitted && f.idCiudad.errors" class="invalid-feedback">
                  <div *ngIf="f.idCiudad.errors.required">La ciudad es requerida</div>
                </div>
              </div>
            </div>
            <div class="mx-auto col-md-2">
              <button class="btn btn-primary btn-sm btn-block" type="submit">Guardar</button>
            </div>
            <br>
          </form>
        </div>
      </div>
    </div>
  </div>
</body>